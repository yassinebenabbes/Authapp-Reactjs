{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/yassine/Documents/front/authapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yassine/Documents/front/authapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/yassine/Documents/front/authapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yassine/Documents/front/authapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import axios from\"axios\";import React,{Component}from\"react\";import{Redirect}from\"react-router-dom\";import{Link}from\"react-router-dom\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.SubmitForm=function(e){e.preventDefault();var data={email:_this.email,password:_this.password};axios.post(\"http://127.0.0.1:8000/api/login\",data)// send data to login route api\n.then(function(res){localStorage.setItem(\"token\",res.data.token);_this.setState({logged:true});_this.props.setdatauser(res.data.user);}).catch(function(err){_this.setState({message:err.response.data.message});e.target.reset();});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;if(this.state.logged){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}var error=\"\";if(this.state.message){error=/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:this.state.message});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.SubmitForm,children:[error,/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Email\",onChange:function onChange(e){return _this2.email=e.target.value;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:function onChange(e){return _this2.password=e.target.value;}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary btn-block\",children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"forgot-password text-right\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot\",children:\" Forgot password \"})})]});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["C:/Users/yassine/Documents/front/authapp/src/components/login.component.js"],"names":["axios","React","Component","Redirect","Link","Login","state","SubmitForm","e","preventDefault","data","email","password","post","then","res","localStorage","setItem","token","setState","logged","props","setdatauser","user","catch","err","message","response","target","reset","error","value"],"mappings":"osBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,GACqBC,CAAAA,K,uTACnBC,K,CAAQ,E,OACRC,U,CAAa,SAACC,CAAD,CAAO,CAClBA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,IAAI,CAAG,CACXC,KAAK,CAAE,MAAKA,KADD,CAEXC,QAAQ,CAAE,MAAKA,QAFJ,CAAb,CAIAZ,KAAK,CACFa,IADH,CACQ,iCADR,CAC2CH,IAD3C,CACiD;AADjD,CAEGI,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,GAAG,CAACL,IAAJ,CAASQ,KAAvC,EACA,MAAKC,QAAL,CAAc,CACZC,MAAM,CAAE,IADI,CAAd,EAGA,MAAKC,KAAL,CAAWC,WAAX,CAAuBP,GAAG,CAACL,IAAJ,CAASa,IAAhC,EACD,CARH,EASGC,KATH,CASS,SAACC,GAAD,CAAS,CACd,MAAKN,QAAL,CAAc,CACZO,OAAO,CAAED,GAAG,CAACE,QAAJ,CAAajB,IAAb,CAAkBgB,OADf,CAAd,EAGAlB,CAAC,CAACoB,MAAF,CAASC,KAAT,GACD,CAdH,EAeD,C,wEACQ,iBACP,GAAI,KAAKvB,KAAL,CAAWc,MAAf,CAAuB,CACrB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,GAAd,EAAP,CACD,CACD,GAAIU,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAI,KAAKxB,KAAL,CAAWoB,OAAf,CAAwB,CACtBI,KAAK,cACH,YAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,UACG,KAAKxB,KAAL,CAAWoB,OADd,EADF,CAKD,CACD,mBACE,cAAM,QAAQ,CAAE,KAAKnB,UAArB,WACGuB,KADH,cAEE,6BAFF,cAGE,aAAK,SAAS,CAAC,YAAf,wBACE,iCADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,OAHd,CAIE,QAAQ,CAAE,kBAACtB,CAAD,QAAQ,CAAA,MAAI,CAACG,KAAL,CAAaH,CAAC,CAACoB,MAAF,CAASG,KAA9B,EAJZ,EAFF,GAHF,cAYE,aAAK,SAAS,CAAC,YAAf,wBACE,oCADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAE,kBAACvB,CAAD,QAAQ,CAAA,MAAI,CAACI,QAAL,CAAgBJ,CAAC,CAACoB,MAAF,CAASG,KAAjC,EAJZ,EAFF,GAZF,cAqBE,eAAQ,SAAS,CAAC,qCAAlB,mBArBF,cAsBE,UAAG,SAAS,CAAC,4BAAb,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,SAAV,+BADF,EAtBF,GADF,CA4BD,C,mBAhEgC7B,S,SAAdG,K","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default class Login extends Component {\r\n  state = {};\r\n  SubmitForm = (e) => {\r\n    e.preventDefault();\r\n    const data = {\r\n      email: this.email,\r\n      password: this.password,\r\n    };\r\n    axios\r\n      .post(\"http://127.0.0.1:8000/api/login\", data) // send data to login route api\r\n      .then((res) => {\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        this.setState({\r\n          logged: true,\r\n        });\r\n        this.props.setdatauser(res.data.user);\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          message: err.response.data.message,\r\n        });\r\n        e.target.reset();\r\n      });\r\n  };\r\n  render() {\r\n    if (this.state.logged) {\r\n      return <Redirect to={\"/\"} />;\r\n    }\r\n    let error = \"\";\r\n    if (this.state.message) {\r\n      error = (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          {this.state.message}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <form onSubmit={this.SubmitForm}>\r\n        {error}\r\n        <h3>Login</h3>\r\n        <div className=\"form-group\">\r\n          <label> Email</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            placeholder=\"Email\"\r\n            onChange={(e) => (this.email = e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label> Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            placeholder=\"Password\"\r\n            onChange={(e) => (this.password = e.target.value)}\r\n          />\r\n        </div>\r\n        <button className=\"btn btn-outline-secondary btn-block\">Login</button>\r\n        <p className=\"forgot-password text-right\">\r\n          <Link to={\"/forgot\"}> Forgot password </Link>\r\n        </p>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}